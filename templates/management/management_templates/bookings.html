{% load static %}

    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Управление бронированиями</h1>

        <!-- Фильтры -->
        <form id="booking-filters-form" class="flex flex-wrap items-end gap-4 mt-4 mb-6">
            <div>
                <label for="apply-date-filter" class="block text-sm font-medium text-gray-700">Дата бронирования</label>
                <input type="text"
                       id="apply-date-filter"
                       name="date"
                       data-datepicker
                       placeholder="Выберите дату"
                       autocomplete="off"
                       class="rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"/>
            </div>

            <div>
                <label class="block text-sm font-medium text-transparent select-none">⠀</label>
                <button type="button"
                        id="filter-button"
                        data-url="{% url 'management:management' active_tab='bookings' %}"
                        onclick="fetchBookings()"
                        class="inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded hover:bg-green-700 transition">
                    Применить фильтр
                </button>
            </div>

            <input type="hidden" name="status" id="filter-status" value="all"/>
        </form>

        <div id="status-filters" class="flex flex-wrap gap-2 mb-6">
            {% for status, display in status_choices.items %}
                <button type="button"
                        class="status-button px-5 ml-2 py-2 rounded-lg text-sm font-medium transition bg-gray-200"
                        data-status="{{ status }}">
                    {{ display }}
                </button>
            {% endfor %}
            <button type="button"
                    class="status-button px-4 py-2 rounded-lg text-sm font-medium transition bg-gray-200"
                    data-status="all">
                Все
            </button>
        </div>

        <!-- Список бронирований -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-100">
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                <h2 class="text-xl font-semibold text-gray-700">Текущие бронирования</h2>
                <button onclick="openModal('create-booking-modal')"
                        class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition duration-200 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    Создать бронирование
                </button>
            </div>

            <div id="bookings-container">
                {% include "management/bookings_modals/bookings_table.html" with bookings=bookings %}
            </div>
        </div>
    </div>


    <!-- Модальные окна -->
    {% for booking in bookings %}
        {% include 'management/bookings_modals/booking_detail.html' with booking=booking %}
        {% include 'management/bookings_modals/booking_edit.html' with booking=booking form=form %}
        {% include 'management/bookings_modals/booking_cancel.html' with booking=booking %}
    {% endfor %}




    <!-- Подключение flatpickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">


{% block extrascripts %}
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <script type="module" src="{% static 'management/js/main.js' %}"></script>
{% endblock %}